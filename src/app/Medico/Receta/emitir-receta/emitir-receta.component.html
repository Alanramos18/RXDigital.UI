<app-encabezado></app-encabezado>

<h2 style="text-align: center; font-size: 35px; text-decoration: underline solid;">EMITIR NUEVA RECETA</h2>

<div class="detalle-receta">

  <div class="section">
    <h2>Datos del Paciente</h2>
    <p><strong>Apellido y Nombre:</strong> {{ paciente.lastName }}, {{ paciente.firstName }} </p>
    <p><strong>DNI:</strong> {{ paciente.patientId }}</p>
    <p><strong>Obra Social:</strong> {{ paciente.socialWorkName }}</p>
    <p><strong>Plan de Obra Social:</strong> {{ paciente.socialPlan }}</p>
    <p><strong>Número de afiliado:</strong> {{ paciente.socialNumber }}</p>
  </div>

  <div class="section">
    <h2>Datos del Médico</h2>
    <p><strong>Apellido y Nombre:</strong> {{ medico.lastName }}, {{ medico.firstName }}</p>
    <p><strong>Especialidad:</strong> {{ medico.speciality }}</p>
    <p><strong>Matrícula Nacional:</strong> {{ medico.registrationId }}</p>
  </div>

  <div class="section">
    <h2>Información</h2>
    <p><strong>Diagnóstico (máx 50 caracteres):</strong></p>
    <textarea rows="2" maxlength="50" [(ngModel)]="diagnostic"></textarea>
    <p><strong>Comentarios (máx 100 caracteres):</strong></p>
    <textarea rows="3" maxlength="100" [(ngModel)]="indications"></textarea>

  </div>

  <div class="section">
    <div class="datos-medicamento">
      <h2>Datos del Medicamento</h2>
      <div *ngIf="!medicamento">
        <button (click)="openModal()">Añadir Medicamento</button>
      </div>

      <div *ngIf="medicamento">
        <label>Nombre comercial</label>
        <span type="text">
          {{ medicamento.commercialName }}
        </span>
        <label>Presentación</label>
        <span type="text">
          {{ medicamento.presentation }}
        </span>
        <label>Concentración</label>
        <span type="text">
          {{ medicamento.concentration }} mg
        </span>
      </div>
      <button (click)="clearSelection()">✖</button>
    </div>
  </div>

  <h2>Forma de Envío</h2>
  <div class="forma-envio">
    <p><strong>Enviar por:</strong></p>
    <label>
      <input type="radio" id="whatsapp" name="envioReceta" [(ngModel)]="formaEnvio" value="whatsapp"> WhatsApp
    </label>
    <label>
      <input type="radio" id="email" name="envioReceta" [(ngModel)]="formaEnvio" value="email"> E-Mail
    </label>
  </div>

</div>

<div class="buttons">
  <button (click)="emitirReceta()">Emitir</button>
  <button (click)="cancelar()">Cancelar</button>
</div>