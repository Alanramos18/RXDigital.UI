<app-encabezado></app-encabezado>

<h2 style="text-align: center; font-size: 35px; text-decoration: underline solid;">EMITIR NUEVA RECETA</h2>

<div class="detalle-receta">

  <div class="section">
    <h2>Datos del Paciente</h2>
    <p><strong>Apellido y Nombre:</strong> {{ paciente.apellido }}, {{ paciente.nombre }} </p>
    <p><strong>DNI:</strong> {{ paciente.dni }}</p>
    <p><strong>Obra Social:</strong> {{ paciente.obraSocial }}</p>
    <p><strong>Plan de Obra Social:</strong> {{ paciente.planSocial }}</p>
    <p><strong>Número de afiliado:</strong> {{ paciente.numeroAfiliado }}</p>
  </div>

  <div class="section">
    <h2>Datos del Médico</h2>
    <p><strong>Apellido y Nombre:</strong> {{ medico.lastName }}, {{ medico.firstName }}</p>
    <p><strong>Especialidad:</strong> {{ medico.speciality }}</p>
    <p><strong>Matrícula Nacional:</strong> {{ medico.registrationId }}</p>
  </div>

  <div class="section">
    <h2>Información</h2>
    <p><strong>Diagnóstico (máx 150 caracteres):</strong></p>
    <textarea rows="4" maxlength="150" [(ngModel)]="diagnostic"></textarea>
    <p><strong>Comentarios (máx 300 caracteres):</strong></p>
    <textarea rows="8" maxlength="300" [(ngModel)]="indications"></textarea>

  </div>

  
  <div class="section">
    <div class="datos-medicamento">
      <h2>Datos del Medicamento</h2>
      
      <button (click)="anadirMedicamento()">Añadir Medicamento</button>


      <div *ngIf="medicamentos.length > 0">
        
        <table>
          <thead>
            <tr>
              <th>Nombre Comercial</th>
              <th>Presentación</th>
              <th>Concentración</th>
      
              <th>Indicaciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let medicamento of medicamentos">
              <td>{{ medicamento.commercialName }}</td>
              <td>{{ medicamento.presentation }}</td>
              <td>{{ medicamento.concentration }}</td>
              <input
                type="text"
                [(ngModel)]="medicamento.indications"
                placeholder="Ingrese indicaciones"
              />
            </tr>
          </tbody>
        </table>
      </div>
      <button (click)="clearSelection()">✖</button>
    </div>
  

  <h2>Forma de Envío</h2>
  <div class="forma-envio">
    <p><strong>Enviar por:</strong></p>
    <label>
      <input type="radio" id="whatsapp" name="envioReceta" checked [(ngModel)]="formaEnvio" value="whatsapp"> WhatsApp
    </label>
    <label>
      <input type="radio" id="email" name="envioReceta" [(ngModel)]="formaEnvio" value="email"> E-Mail
    </label>
  </div>

</div>

<div class="buttons">
  <button (click)="emitirReceta()">Emitir</button>
  <button (click)="cancelar()">Cancelar</button>
</div>